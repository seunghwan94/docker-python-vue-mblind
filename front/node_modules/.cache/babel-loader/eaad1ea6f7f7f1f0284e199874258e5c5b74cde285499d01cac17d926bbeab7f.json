{"ast":null,"code":"// npm install @tiptap/vue-3 @tiptap/starter-kit @tiptap/extension-underline @tiptap/extension-text-align @tiptap/extension-link @tiptap/extension-image\nimport axios from 'axios';\nimport { ref, onMounted, onBeforeUnmount } from 'vue';\nimport { Editor } from '@tiptap/vue-3';\nimport StarterKit from '@tiptap/starter-kit';\nimport Underline from '@tiptap/extension-underline';\nimport TextAlign from '@tiptap/extension-text-align';\nimport Link from '@tiptap/extension-link';\nimport Image from '@tiptap/extension-image';\nimport BoardWriteBar from './BoardWriteBar.vue';\nexport default {\n  components: {\n    BoardWriteBar\n  },\n  data() {\n    return {\n      user_id: sessionStorage.getItem('user_id')\n    };\n  },\n  setup() {\n    const editor = ref(null);\n    const editorElement = ref(null);\n    const title = ref('');\n    const category = ref(''); // 새로 추가된 부분\n    onMounted(() => {\n      editor.value = new Editor({\n        element: editorElement.value,\n        extensions: [StarterKit, Underline, TextAlign.configure({\n          types: ['heading', 'paragraph']\n        }), Link, Image],\n        content: '<p>여기에 내용을 입력하세요.</p>'\n      });\n    });\n    onBeforeUnmount(() => {\n      if (editor.value) {\n        editor.value.destroy();\n      }\n    });\n    const BoardWrite = () => {\n      const content = editor.value.getHTML();\n      console.log('Category:', category.value); // 새로 추가된 부분\n      console.log('Title:', title.value);\n      console.log('Content:', content);\n      console.log('user_id:', this.user_id);\n      if (content && title.value && category.value) {\n        // axios.post(`${this.$BackURL}/boardPostting`, {\n        axios.post(`${this.$BackURL}/boardPostting`, {\n          content: content,\n          title: title.value,\n          category: category.value,\n          user_id: this.user_id\n        }).then(res => {\n          console.log(res.data);\n          if (res.data.status === 'success') {\n            alert('게시글이 작성 되었습니다.');\n            window.location.reload();\n          } else {\n            alert('postting 에러');\n          }\n        }).catch(e => {\n          console.error('에러', e);\n          alert('서버 에러');\n        });\n      } else {\n        alert('공백이 있습니다.');\n      }\n    };\n    return {\n      editor,\n      editorElement,\n      title,\n      category,\n      BoardWrite\n    }; // category 추가\n  },\n  props: {\n    categories: Object\n  }\n};","map":{"version":3,"names":["axios","ref","onMounted","onBeforeUnmount","Editor","StarterKit","Underline","TextAlign","Link","Image","BoardWriteBar","components","data","user_id","sessionStorage","getItem","setup","editor","editorElement","title","category","value","element","extensions","configure","types","content","destroy","BoardWrite","getHTML","console","log","post","$BackURL","then","res","status","alert","window","location","reload","catch","e","error","props","categories","Object"],"sources":["/var/www/front/src/components/Board/BoardWrite.vue"],"sourcesContent":["<template>\n    <div class=\"editor mt-3\">{{ user_id }}\n      <BoardWriteBar v-if=\"editor\" :editor=\"editor\" />\n      <div class=\"d-flex mt-2 mb-3\">\n        <select v-model=\"category\" class=\"form-select w-25 me-1\" id=\"Category\">\n          <option value=\"\" disabled>카테고리</option>\n          <option v-for=\"(value, key) in categories\" :key=\"key\" :value=\"key\">{{ value }}</option>\n        </select>\n        <input v-model=\"title\" class=\"form-control\" placeholder=\"제목을 입력하세요\">\n      </div>\n      <div ref=\"editorElement\" class=\"editor-content\"></div>\n    </div>\n    <div class=\"d-flex justify-content-end\">\n      <button type=\"button\" class=\"btn btn-primary mt-3 mb-3\" @click=\"BoardWrite\">Save</button>\n    </div>\n  </template>\n  \n  <script>\n// npm install @tiptap/vue-3 @tiptap/starter-kit @tiptap/extension-underline @tiptap/extension-text-align @tiptap/extension-link @tiptap/extension-image\n  import axios  from 'axios';\n  import { ref, onMounted, onBeforeUnmount } from 'vue';\n  import { Editor } from '@tiptap/vue-3';\n  import StarterKit from '@tiptap/starter-kit';\n  import Underline from '@tiptap/extension-underline';\n  import TextAlign from '@tiptap/extension-text-align';\n  import Link from '@tiptap/extension-link';\n  import Image from '@tiptap/extension-image';\n  import BoardWriteBar from './BoardWriteBar.vue';\n  export default {\n    components: {\n      BoardWriteBar,\n    },\n    data(){\n      return{\n        user_id: sessionStorage.getItem('user_id')\n      }\n    },\n    setup() {\n      const editor = ref(null);\n      const editorElement = ref(null);\n      const title = ref('');\n      const category = ref(''); // 새로 추가된 부분\n      onMounted(() => {\n        editor.value = new Editor({\n          element: editorElement.value,\n          extensions: [\n            StarterKit,\n            Underline,\n            TextAlign.configure({\n              types: ['heading', 'paragraph'],\n            }),\n            Link,\n            Image,\n          ],\n          content: '<p>여기에 내용을 입력하세요.</p>',\n        });\n      });\n      onBeforeUnmount(() => {\n        if (editor.value) {\n          editor.value.destroy();\n        }\n      });\n      const BoardWrite = () => {\n        const content = editor.value.getHTML();\n        console.log('Category:', category.value); // 새로 추가된 부분\n        console.log('Title:', title.value);\n        console.log('Content:', content);\n        console.log('user_id:', this.user_id);\n        if (content && title.value && category.value) {\n              // axios.post(`${this.$BackURL}/boardPostting`, {\n              axios.post(`${this.$BackURL}/boardPostting`, {\n                  content: content,\n                  title: title.value,\n                  category: category.value,\n                  user_id: this.user_id\n              }).then(res => {\n                  console.log(res.data);\n                  if (res.data.status === 'success') {\n                    alert('게시글이 작성 되었습니다.')\n                    window.location.reload();\n                  }else{\n                    alert('postting 에러');\n                  }\n              }).catch(e => {\n                  console.error('에러', e); \n                  alert('서버 에러');\n              });\n          } else {\n            alert('공백이 있습니다.');\n          }\n      };\n      return { editor, editorElement, title, category, BoardWrite }; // category 추가\n    },\n    props: {\n      categories:Object\n    }\n  };\n  </script>\n  \n  <style scoped>\n  .editor {\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    min-height: 50vh;\n    padding: 16px;\n  }\n  .editor-content {\n    min-height: 200px;\n  }\n  hr {\n    margin: 20px 0;\n    border: none;\n    border-top: 1px solid #ddd;\n  }\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}