{"ast":null,"code":"import axios from 'axios';\nimport BoardList from './BoardList.vue';\nexport default {\n  data() {\n    return {\n      selectedCategory: '1',\n      categories: {},\n      posts: [],\n      // 게시글 데이터를 저장할 배열\n      totalPosts: 0,\n      // 전체 게시글 수\n      currentPage: 1,\n      // 현재 페이지\n      perPage: 10 // 페이지당 게시글 수\n    };\n  },\n  created() {\n    this.fetchCategories(); // 카테고리 목록 가져오기\n    this.fetchboard(this.selectedCategory, this.currentPage);\n    this.fetchboardpage(this.selectedCategory);\n  },\n  methods: {\n    selectCategory(key) {\n      this.selectedCategory = key;\n      this.currentPage = 1; // 카테고리 변경 시 페이지를 1로 초기화\n      this.fetchboard(this.selectedCategory, this.currentPage);\n      this.fetchboardpage(this.selectedCategory);\n    },\n    async fetchCategories() {\n      try {\n        const response = await axios.post(`${this.$BackURL}/category`);\n        if (response.data.status === 'success') {\n          const categories = response.data.res.reduce((acc, category) => {\n            acc[category.id] = category.name;\n            return acc;\n          }, {});\n          this.categories = categories;\n        } else {\n          console.error('Failed to fetch categories:', response.data.message);\n        }\n      } catch (error) {\n        console.error('Error fetching categories:', error);\n      }\n    },\n    async fetchboard(categoryId, page) {\n      try {\n        const response = await axios.get(`${this.$BackURL}/boardList`, {\n          params: {\n            category_id: categoryId,\n            page: page,\n            per_page: this.perPage\n          }\n        });\n        if (response.data.status === 'success') {\n          this.posts = response.data.posts; // 실제 데이터 필드 확인\n        } else {\n          this.posts = [];\n        }\n      } catch (error) {\n        console.error('Error fetching posts:', error);\n      }\n    },\n    async fetchboardpage(categoryId) {\n      try {\n        const response = await axios.get(`${this.$BackURL}/boardListPage`, {\n          params: {\n            category_id: categoryId\n          }\n        });\n        if (response.data.status === 'success') {\n          this.totalPosts = response.data.total_posts;\n        } else {\n          this.totalPosts = 0;\n        }\n      } catch (error) {\n        console.error('Error fetching posts count:', error);\n      }\n    },\n    changePage(newPage) {\n      if (newPage > 0 && newPage <= this.totalPages) {\n        this.currentPage = newPage;\n        this.fetchboard(this.selectedCategory, this.currentPage);\n      }\n    }\n  },\n  computed: {\n    totalPages() {\n      return Math.ceil(this.totalPosts / this.perPage);\n    }\n  },\n  components: {\n    BoardList\n  }\n};","map":{"version":3,"names":["axios","BoardList","data","selectedCategory","categories","posts","totalPosts","currentPage","perPage","created","fetchCategories","fetchboard","fetchboardpage","methods","selectCategory","key","response","post","$BackURL","status","res","reduce","acc","category","id","name","console","error","message","categoryId","page","get","params","category_id","per_page","total_posts","changePage","newPage","totalPages","computed","Math","ceil","components"],"sources":["/var/www/front/src/components/Board/MainBoard.vue"],"sourcesContent":["<template>\n    {{posts}}\n    <div class=\"d-flex\" style=\"flex-direction: row;\">\n        <button\n            type=\"button\"\n            class=\"btn btn-outline-primary m-2\"\n            :class=\"{ active: selectedCategory === key }\"\n            v-for=\"(value, key) in categories\"\n            :key=\"key\"\n            @click=\"selectCategory(key)\">\n            {{ value }}\n        </button>\n    </div>\n    <BoardList :posts=\"posts\"/>\n</template>\n\n<script>\nimport axios from 'axios';\nimport BoardList from './BoardList.vue';\n\nexport default {\n    data() {\n        return {\n            selectedCategory: '1',\n            categories: {},\n            posts: [],        // 게시글 데이터를 저장할 배열\n            totalPosts: 0,    // 전체 게시글 수\n            currentPage: 1,   // 현재 페이지\n            perPage: 10,      // 페이지당 게시글 수\n        }\n    },\n    created() {\n        this.fetchCategories(); // 카테고리 목록 가져오기\n        this.fetchboard(this.selectedCategory, this.currentPage);\n        this.fetchboardpage(this.selectedCategory);\n    },\n    methods: {\n        selectCategory(key) {\n            this.selectedCategory = key;\n            this.currentPage = 1; // 카테고리 변경 시 페이지를 1로 초기화\n            this.fetchboard(this.selectedCategory, this.currentPage);\n            this.fetchboardpage(this.selectedCategory);\n        },\n        async fetchCategories() {\n            try {\n                const response = await axios.post(`${this.$BackURL}/category`);\n                if (response.data.status === 'success') {\n                    const categories = response.data.res.reduce((acc, category) => {\n                        acc[category.id] = category.name;\n                        return acc;\n                    }, {});\n                    this.categories = categories;\n                } else {\n                    console.error('Failed to fetch categories:', response.data.message);\n                }\n            } catch (error) {\n                console.error('Error fetching categories:', error);\n            }\n        },\n        async fetchboard(categoryId, page) {\n            try {\n                const response = await axios.get(`${this.$BackURL}/boardList`, {\n                    params: {\n                        category_id: categoryId,\n                        page: page,\n                        per_page: this.perPage\n                    }\n                });\n                if (response.data.status === 'success') {\n                    this.posts = response.data.posts; // 실제 데이터 필드 확인\n                } else {\n                    this.posts = [];\n                }\n            } catch (error) {\n                console.error('Error fetching posts:', error);\n            }\n        },\n        async fetchboardpage(categoryId) {\n            try {\n                const response = await axios.get(`${this.$BackURL}/boardListPage`, {\n                    params: {\n                        category_id: categoryId\n                    }\n                });\n                if (response.data.status === 'success') {\n                    this.totalPosts = response.data.total_posts;\n                } else {\n                    this.totalPosts = 0;\n                }\n            } catch (error) {\n                console.error('Error fetching posts count:', error);\n            }\n        },\n        changePage(newPage) {\n            if (newPage > 0 && newPage <= this.totalPages) {\n                this.currentPage = newPage;\n                this.fetchboard(this.selectedCategory, this.currentPage);\n            }\n        }\n    },\n    computed: {\n        totalPages() {\n            return Math.ceil(this.totalPosts / this.perPage);\n        }\n    },\n    components: {\n        BoardList,\n    }\n}\n</script>\n\n<style>\n\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}