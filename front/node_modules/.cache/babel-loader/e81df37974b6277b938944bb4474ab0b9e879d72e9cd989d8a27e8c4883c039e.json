{"ast":null,"code":"import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-2d2ce2b2\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"editor mt-3\"\n};\nconst _hoisted_2 = {\n  class: \"d-flex mt-2 mb-3\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\",\n  disabled: \"\"\n}, \"카테고리\", -1 /* HOISTED */));\nconst _hoisted_4 = [\"value\"];\nconst _hoisted_5 = {\n  ref: \"editorElement\",\n  class: \"editor-content\"\n};\nconst _hoisted_6 = {\n  class: \"d-flex justify-content-end\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_BoardWriteBar = _resolveComponent(\"BoardWriteBar\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [$setup.editor ? (_openBlock(), _createBlock(_component_BoardWriteBar, {\n    key: 0,\n    editor: $setup.editor\n  }, null, 8 /* PROPS */, [\"editor\"])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_2, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.category = $event),\n    class: \"form-select w-25 me-1\",\n    id: \"Category\"\n  }, [_hoisted_3, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.categories, (value, key) => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: key,\n      value: key\n    }, _toDisplayString(value), 9 /* TEXT, PROPS */, _hoisted_4);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.category]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.title = $event),\n    class: \"form-control\",\n    placeholder: \"제목을 입력하세요\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.title]])]), _createElementVNode(\"div\", _hoisted_5, null, 512 /* NEED_PATCH */)]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-primary mt-3 mb-3\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $setup.BoardWrite && $setup.BoardWrite(...args))\n  }, \"Save\")]), _createTextVNode(\" \" + _toDisplayString($props.selectBoard), 1 /* TEXT */)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","value","disabled","ref","_createElementBlock","_Fragment","_hoisted_1","$setup","editor","_createBlock","_component_BoardWriteBar","key","_createCommentVNode","_hoisted_2","_cache","$event","category","id","_hoisted_3","_renderList","$props","categories","_hoisted_4","title","placeholder","_hoisted_5","_hoisted_6","type","onClick","args","BoardWrite","_createTextVNode","_toDisplayString","selectBoard"],"sources":["/var/www/front/src/components/Board/BoardWrite.vue"],"sourcesContent":["<template>\n    <div class=\"editor mt-3\">\n      <BoardWriteBar v-if=\"editor\" :editor=\"editor\" />\n      <div class=\"d-flex mt-2 mb-3\">\n        <select v-model=\"category\" class=\"form-select w-25 me-1\" id=\"Category\">\n          <option value=\"\" disabled>카테고리</option>\n          <option v-for=\"(value, key) in categories\" :key=\"key\" :value=\"key\">{{ value }}</option>\n        </select>\n        <input v-model=\"title\" class=\"form-control\" placeholder=\"제목을 입력하세요\">\n      </div>\n      <div ref=\"editorElement\" class=\"editor-content\"></div>\n    </div>\n    <div class=\"d-flex justify-content-end\">\n      <button type=\"button\" class=\"btn btn-primary mt-3 mb-3\" @click=\"BoardWrite\">Save</button>\n    </div>\n    {{ selectBoard }}\n  </template>\n  \n  <script>\n// npm install @tiptap/vue-3 @tiptap/starter-kit @tiptap/extension-underline @tiptap/extension-text-align @tiptap/extension-link @tiptap/extension-image\n  import axios  from 'axios';\n  import { ref, onMounted, onBeforeUnmount, computed } from 'vue';\n  import { Editor } from '@tiptap/vue-3';\n  import StarterKit from '@tiptap/starter-kit';\n  import Underline from '@tiptap/extension-underline';\n  import TextAlign from '@tiptap/extension-text-align';\n  import Link from '@tiptap/extension-link';\n  import Image from '@tiptap/extension-image';\n  import BoardWriteBar from './BoardWriteBar.vue';\n  export default {\n    components: {\n      BoardWriteBar,\n    },\n    setup(props) {\n      const editor = ref(null);\n      const editorElement = ref(null);\n      const title = ref(props.selectBoard.title || '');\n      const category = ref(props.selectBoard.category_id || '');\n      const user_id = ref(sessionStorage.getItem('user_id'));  // `setup` 함수 내부에서 정의\n      // computed로 반응형으로 props 값을 처리\n      const text = computed(() => {\n        return props.selectBoard.content ? props.selectBoard.content : '<p>여기에 내용을 입력하세요.</p>';\n      });\n\n      onMounted(() => {\n        editor.value = new Editor({\n          element: editorElement.value,\n          extensions: [\n            StarterKit,\n            Underline,\n            TextAlign.configure({\n              types: ['heading', 'paragraph'],\n            }),\n            Link,\n            Image,\n          ],\n          content: text.value,\n        });\n      });\n      onBeforeUnmount(() => {\n        if (editor.value) {\n          editor.value.destroy();\n        }\n      });\n      const BoardWrite = () => {\n\n        const content = editor.value.getHTML();\n        console.log('Category:', category.value); // 새로 추가된 부분\n        console.log('Title:', title.value);\n        console.log('Content:', content);\n        console.log('user_id:', user_id.value);\n\n        if (content && title.value && category.value) {\n              // axios.post(`${this.$BackURL}/boardPostting`, {\n              axios.post(`${props.BackURL}/boardPostting`, {\n                  content: content,\n                  title: title.value,\n                  category: category.value,\n                  user_id: user_id.value\n              }).then(res => {\n                  console.log(res.data);\n                  if (res.data.status === 'success') {\n                    alert('게시글이 작성 되었습니다.')\n                    window.location.reload();\n                  }else{\n                    alert('postting 에러');\n                  }\n              }).catch(e => {\n                  console.error('에러', e); \n                  alert('서버 에러');\n              });\n          } else {\n            alert('공백이 있습니다.');\n          }\n      };\n      return { editor, editorElement, title, category, BoardWrite }; // category 추가\n    },\n    props: {\n      categories:Object,\n      BackURL: String, \n      selectBoard: Object,\n    }\n  };\n  </script>\n  \n  <style scoped>\n  .editor {\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    min-height: 50vh;\n    padding: 16px;\n  }\n  .editor-content {\n    min-height: 200px;\n  }\n  hr {\n    margin: 20px 0;\n    border: none;\n    border-top: 1px solid #ddd;\n  }\n  </style>"],"mappings":";;;EACSA,KAAK,EAAC;AAAa;;EAEjBA,KAAK,EAAC;AAAkB;gEAEzBC,mBAAA,CAAuC;EAA/BC,KAAK,EAAC,EAAE;EAACC,QAAQ,EAAR;GAAS,MAAI;mBALxC;;EAUWC,GAAG,EAAC,eAAe;EAACJ,KAAK,EAAC;;;EAE5BA,KAAK,EAAC;AAA4B;;;uBAZ3CK,mBAAA,CAAAC,SAAA,SACIL,mBAAA,CAUM,OAVNM,UAUM,GATiBC,MAAA,CAAAC,MAAM,I,cAA3BC,YAAA,CAAgDC,wBAAA;IAFtDC,GAAA;IAEoCH,MAAM,EAAED,MAAA,CAAAC;yCAF5CI,mBAAA,gBAGMZ,mBAAA,CAMM,OANNa,UAMM,G,gBALJb,mBAAA,CAGS;IAPjB,uBAAAc,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAIyBR,MAAA,CAAAS,QAAQ,GAAAD,MAAA;IAAEhB,KAAK,EAAC,uBAAuB;IAACkB,EAAE,EAAC;MAC1DC,UAAuC,G,kBACvCd,mBAAA,CAAuFC,SAAA,QANjGc,WAAA,CAMyCC,MAAA,CAAAC,UAAU,EANnD,CAM0BpB,KAAK,EAAEU,GAAG;yBAA1BP,mBAAA,CAAuF;MAA3CO,GAAG,EAAEA,GAAG;MAAGV,KAAK,EAAEU;wBAAQV,KAAK,wBANrFqB,UAAA;2EAIyBf,MAAA,CAAAS,QAAQ,E,mBAIzBhB,mBAAA,CAAoE;IAR5E,uBAAAc,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAQwBR,MAAA,CAAAgB,KAAK,GAAAR,MAAA;IAAEhB,KAAK,EAAC,cAAc;IAACyB,WAAW,EAAC;iDAAxCjB,MAAA,CAAAgB,KAAK,E,KAEvBvB,mBAAA,CAAsD,OAAtDyB,UAAsD,8B,GAExDzB,mBAAA,CAEM,OAFN0B,UAEM,GADJ1B,mBAAA,CAAyF;IAAjF2B,IAAI,EAAC,QAAQ;IAAC5B,KAAK,EAAC,2BAA2B;IAAE6B,OAAK,EAAAd,MAAA,QAAAA,MAAA,UAAAe,IAAA,KAAEtB,MAAA,CAAAuB,UAAA,IAAAvB,MAAA,CAAAuB,UAAA,IAAAD,IAAA,CAAU;KAAE,MAAI,E,GAbtFE,gBAAA,CAcU,GACN,GAAAC,gBAAA,CAAGZ,MAAA,CAAAa,WAAW,iB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}